<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <!-- 위 3개의 메타 태그는 *반드시* head 태그의 처음에 와야합니다; 어떤 다른 콘텐츠들은 반드시 이 태그들 *다음에* 와야 합니다 -->
	    <title>뺌::회원가입</title>
	
	    <!-- 부트스트랩 -->
	    <link href="css/bootstrap.min.css" rel="stylesheet">
	    <link href="css/style.css" rel="stylesheet">
	
	    <!-- IE8 에서 HTML5 요소와 미디어 쿼리를 위한 HTML5 shim 와 Respond.js -->
	    <!-- WARNING: Respond.js 는 당신이 file:// 을 통해 페이지를 볼 때는 동작하지 않습니다. -->
	    <!--[if lt IE 9]>
	      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	    <![endif]-->
	</head>
	<body>
		<div class="container">
			<form method="post" action='join.jsp'>
			<!--<form name="joinform" method="post" onsubmit="return fregisterform_submit(this);" autocomplete="off">-->
				<div class = "form-group">
					<label class="heading" for="name">이름:</label>
					<input type="text" name="id" id="id"/> <br>
				</div>
				<div class = "form-group">
					<label class="heading" for="passwd">패스워드:</label>
					<input type="password" name="passwd" id="passwd"/> <br>
				</div>
				<div class = "form-group">
					<label class="heading" for="passwd2">패스워드확인:</label>
					<input type="password" name="passwd2" id="passwd2"/> <br>
				</div>
				<div class = "form-group">
					<label class="heading" for="name">전화번호:</label>
					<input type="text" name="phone" id="iphone"/> <br><br>
				</div>
				<input type="submit" value="회원가입" class="btn btn-primary btn-lg btn-block"/>
			</form>
		</div><!-- /.container-->
		<!-- jQuery (부트스트랩의 자바스크립트 플러그인을 위해 필요합니다) -->
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	    <!-- 모든 컴파일된 플러그인을 포함합니다 (아래), 원하지 않는다면 필요한 각각의 파일을 포함하세요 -->
	    <script src="js/bootstrap.min.js"></script>
	    <script language="JavaScript">
	    	// submit 최종 폼체크
function fregisterform_submit(f) 
{
	var mb_id = reg_mb_id_check(f.id.value);
	if(mb_id) {
		alert("'"+mb_id+"'은(는) 사용하실 수 없는 아이디입니다.");
		f.id.focus();
		return false;
	}

    // 회원아이디 검사
	if(f.id.value.length < 10) {
		alert('아이디를 10~11글자 휴대전화번호로 입력하십시오.');
		f.id.focus();
		return false;
	}

    // 패스워드 검사
	if(f.passwd.value.length < 4) {
		alert('패스워드를 4글자 이상 입력하십시오.');
		f.passwd.focus();
		return false;
	}

    if(f.passwd.value != f.repasswd.value) {
        alert('패스워드가 같지 않습니다.');
        f.repasswd.focus();
        return false;
    }

    if(f.passwd.value.length > 0) {
        if(f.repasswd.value.length < 4) {
            alert('패스워드를 4글자 이상 입력하십시오.');
            f.repasswd.focus();
            return false;
        }
    }

	<?php if($ar_init['sp_use_email']) { ?>	
	// 사용할 수 없는 E-mail 도메인
	var domain = prohibit_email_check(f.email.value);
	if(domain) {
		alert("'"+domain+"'은(는) 사용하실 수 없는 메일입니다.");
		f.email.focus();
		return false;
	}
	<?php } ?>

	if(confirm("입력하신 사항들이 맞는지 확인하시기 바랍니다.\n\n회원가입 하시려면 '확인'버튼을 클릭하세요") == false)
		return false;

    f.action = './register_form_update.php';
    return true;
}

// 회원아이디 검사
function reg_mb_id_check(mb_id)
{
    mb_id = mb_id.toLowerCase();

    var prohibit_mb_id = "<?=trim(strtolower($ar_init['sp_prohibit_id']));?>";
    var s = prohibit_mb_id.split(",");

    for(i=0; i<s.length; i++) {
        if(s[i] == mb_id)
            return mb_id;
    }
    return "";
}

// 금지 메일 도메인 검사
function prohibit_email_check(email)
{
    email = email.toLowerCase();

    var prohibit_email = "<?=trim(strtolower(preg_replace("/(\r\n|\r|\n)/", ",", $ar_init['sp_prohibit_email'])));?>";
    var s = prohibit_email.split(",");
    var tmp = email.split("@");
    var domain = tmp[tmp.length - 1]; // 메일 도메인만 얻는다

    for(i=0; i<s.length; i++) {
        if(s[i] == domain)
            return domain;
    }
    return "";
}

function reg_mb_id_ajax() {
	var mb_id = $.trim($("#mb_id").val());
	$.post(
		"./ajax_mb_id_check.php",
		{ mb_id: mb_id },							 
		function(data) {
			$("#sit_mb_id").empty().html(data);
		}
	);
}
</script>
	    </script>
	</body>
</html>
